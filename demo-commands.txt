# 1. Show help and version
queuectl --help

# 2. View initial status
queuectl status

# 3. Enqueue multiple jobs
queuectl enqueue "echo 'Processing order #1001'"
queuectl enqueue "echo 'Processing order #1002'"
queuectl enqueue "echo 'Processing order #1003'"

# 4. Check status to see pending jobs
queuectl status

# 5. List all jobs
queuectl list

# 6. Start multiple workers
queuectl worker start --count 2

# 7. Watch status change
queuectl status

# 8. List completed jobs
queuectl list --state completed

# 9. Demonstrate configuration
queuectl config get
queuectl config set max_retries 4
queuectl config get max_retries

# 10. Enqueue failing jobs to show retry mechanism
queuectl enqueue "exit 1" --retries 2
queuectl enqueue "nonexistentcommand" --retries 3

# 11. Start worker to watch retry with exponential backoff
queuectl worker start --count 1
# Wait to see retries, then Ctrl+C

# 12. Check status and DLQ
queuectl status
queuectl dlq list

# 13. Retry a job from DLQ (replace <job-id> with actual ID)
# queuectl dlq retry <job-id>

# 14. Stop workers gracefully
queuectl worker stop

# 15. Final status check
queuectl status

# 16. Show persistence
queuectl list --limit 3
